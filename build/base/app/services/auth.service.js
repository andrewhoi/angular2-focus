var __decorate=this&&this.__decorate||function(e,t,r,i){var n,s=arguments.length,a=3>s?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(3>s?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},core_1=require("angular2/core"),Observable_1=require("rxjs/Observable"),interfaces_1=require("../interfaces/interfaces"),AuthService=function(){function e(){var e=this;this._firebaseRef=new Firebase("https://focus-app.firebaseio.com/"),this.authUser$=new Observable_1.Observable(function(t){return e._authUserObserver=t}).share(),this.authUser$.subscribe(),this._firebaseRef.onAuth(function(t){t?e._authUserObserver.next(t):e._authUserObserver.next(null)})}return Object.defineProperty(e.prototype,"userSession",{get:function(){return this._firebaseRef.getAuth()},enumerable:!0,configurable:!0}),e.prototype.loadAuthUser=function(){this._authUserObserver.next(this._firebaseRef.getAuth())},e.prototype.login=function(e){e===interfaces_1.AuthType.TWITTER?this._login("twitter"):e===interfaces_1.AuthType.GITHUB&&this._login("github")},e.prototype.logout=function(){this._firebaseRef.unauth()},e.prototype.isLoggedIn=function(){return!!this._firebaseRef.getAuth()},e.prototype._login=function(e){var t=this;this._firebaseRef.authWithOAuthPopup(e,function(e,r){e?console.log("Login Failed!",e):t._firebaseRef.child("/users/"+r.uid).child("authData").set(r)})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.AuthService=AuthService;