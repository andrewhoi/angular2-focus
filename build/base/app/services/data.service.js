var __decorate=this&&this.__decorate||function(e,t,r,s){var a,i=arguments.length,o=3>i?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(3>i?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},core_1=require("angular2/core"),Observable_1=require("rxjs/Observable"),auth_service_1=require("./auth.service"),DataService=function(){function e(e){var t=this;this._authService=e,this.focusPhases$=new Observable_1.Observable(function(e){return t._focusPhasesObserver=e}).share(),this.focusPhases$.subscribe(),this._firebaseRef=new Firebase("https://focus-app.firebaseio.com/"),this._authService.authUser$.subscribe(function(e){t._authUser=e,t.loadFocusPhases()}),this._authService.loadAuthUser()}return e.prototype.loadFocusPhases=function(){var e=this;this._authService.isLoggedIn()?this._firebaseRef.child("users/"+this._authUser.uid+"/focusPhases").on("value",function(t){e._focusPhasesObserver.next(e._firebaseArrayToArray(t.val()))},function(e){console.log("The read failed: "+e.code)}):this._focusPhasesObserver.next([])},e.prototype.addFocusPhase=function(e){this._authService.isLoggedIn()&&this._firebaseRef.child("users/"+this._authUser.uid+"/focusPhases").push(e)},e.prototype._firebaseArrayToArray=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[auth_service_1.AuthService])],e)}();exports.DataService=DataService;