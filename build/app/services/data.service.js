var __decorate=this&&this.__decorate||function(e,t,r,a){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,a);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,a){return void(a&&a(t,r))},void 0);case 4:return e.reduceRight(function(e,a){return a&&a(t,r,e)||e},a)}},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},angular2_1=require("angular2/angular2"),auth_service_1=require("./auth.service"),DataService=function(){function e(e){var t=this;this._authService=e,this.focusPhases$=new angular2_1.Observable(function(e){return t._focusPhasesObserver=e}).share(),this.focusPhases$.subscribe(),this._firebaseRef=new Firebase("https://focus-app.firebaseio.com/"),this._authService.authUser$.subscribe(function(e){t._authUser=e,t.loadFocusPhases()}),this._authService.loadAuthUser()}return e.prototype.loadFocusPhases=function(){var e=this;this._authService.isLoggedIn()?this._firebaseRef.child("users/"+this._authUser.uid+"/focusPhases").on("value",function(t){e._focusPhasesObserver.next(e._firebaseArrayToArray(t.val()))},function(e){console.log("The read failed: "+e.code)}):this._focusPhasesObserver.next([])},e.prototype.addFocusPhase=function(e){this._authService.isLoggedIn()&&this._firebaseRef.child("users/"+this._authUser.uid+"/focusPhases").push(e)},e.prototype._firebaseArrayToArray=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},e=__decorate([angular2_1.Injectable(),__metadata("design:paramtypes",[auth_service_1.AuthService])],e)}();exports.DataService=DataService;