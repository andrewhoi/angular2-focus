var __decorate=this&&this.__decorate||function(e,t,r,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,r))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,r,e)||e},i)}},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},angular2_1=require("angular2/angular2"),interfaces_1=require("../interfaces/interfaces"),AuthService=function(){function e(){var e=this;this._firebaseRef=new Firebase("https://focus-app.firebaseio.com/"),this.authUser$=new angular2_1.Observable(function(t){return e._authUserObserver=t}).share(),this.authUser$.subscribe(),this._firebaseRef.onAuth(function(t){t?e._authUserObserver.next(t):e._authUserObserver.next(null)})}return Object.defineProperty(e.prototype,"userSession",{get:function(){return this._firebaseRef.getAuth()},enumerable:!0,configurable:!0}),e.prototype.loadAuthUser=function(){this._authUserObserver.next(this._firebaseRef.getAuth())},e.prototype.login=function(e){e===interfaces_1.AuthType.TWITTER?this._login("twitter"):e===interfaces_1.AuthType.GITHUB&&this._login("github")},e.prototype.logout=function(){this._firebaseRef.unauth()},e.prototype.isLoggedIn=function(){return!!this._firebaseRef.getAuth()},e.prototype._login=function(e){var t=this;this._firebaseRef.authWithOAuthPopup(e,function(e,r){e?console.log("Login Failed!",e):t._firebaseRef.child("/users/"+r.uid).child("authData").set(r)})},e=__decorate([angular2_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.AuthService=AuthService;